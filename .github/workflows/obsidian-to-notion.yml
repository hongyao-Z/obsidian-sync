name: Obsidian to Notion
on:
  push:
    paths:
      - "obs/sora2/**.md"
  workflow_dispatch:

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: "3.x"
      - run: pip install notion-client markdown
      - name: Sync changed notes to Notion
        env:
          NOTION_TOKEN: ${{ secrets.NOTION_TOKEN }}
          NOTION_DB: ${{ secrets.NOTION_DB }}
          TITLE_PROP: "名称"          # 你的 Notion 标题属性名
          UPDATED_PROP: "最近更新"     # 你的 Notion 日期属性名（没有就留空: ""）
        run: |
          python .github/scripts/sync_to_notion.py
